{{define "components/studios/manage-agents-modal.tmpl"}}
<!-- Manage Agents Modal -->
<div class="modal fade" id="manageAgentsModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" style="color: var(--text-primary);">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="me-2">
            <path d="M12,5.5A3.5,3.5 0 0,1 15.5,9A3.5,3.5 0 0,1 12,12.5A3.5,3.5 0 0,1 8.5,9A3.5,3.5 0 0,1 12,5.5M5,8C5.56,8 6.08,8.15 6.53,8.42C6.38,9.85 6.8,11.27 7.66,12.38C7.16,13.34 6.16,14 5,14A3,3 0 0,1 2,11A3,3 0 0,1 5,8M19,8A3,3 0 0,1 22,11A3,3 0 0,1 19,14C17.84,14 16.84,13.34 16.34,12.38C17.2,11.27 17.62,9.85 17.47,8.42C17.92,8.15 18.44,8 19,8Z"/>
          </svg>
          Manage Agents
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">

        <!-- Create Agent Section -->
        <div class="mb-4">
          <h6 style="color: var(--text-primary);">Create New Agent</h6>
          <form id="studiosCreateAgentForm" class="modern-card p-3">
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label" style="color: var(--text-primary);">Agent Name</label>
                <input type="text" id="studios-new-agent-name" class="modern-input w-100" placeholder="Enter agent name..." required>
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label" style="color: var(--text-primary);">Agent Type</label>
                <select id="studios-new-agent-type" class="modern-input w-100">
                  <option value="tool-calling">Tool Calling (Cheapest - Optimized for tool use)</option>
                  <option value="general">General Purpose (Mid-tier - Balanced capability)</option>
                  <option value="orchestration">Orchestration (Advanced - Multi-agent coordination)</option>
                  <option value="research">Research (Expensive - Complex thinking)</option>
                </select>
              </div>
            </div>
            <div class="mb-3">
              <label class="form-label" style="color: var(--text-primary);">Model</label>
              <select id="studios-new-agent-model" class="modern-input w-100">
                <option value="">Loading models...</option>
              </select>
            </div>
            <div class="mb-3">
              <label class="form-label" style="color: var(--text-primary);">
                Temperature: <span id="studios-new-agent-temperature-value">1.0</span>
              </label>
              <input type="range" id="studios-new-agent-temperature" class="form-range" min="0" max="2" step="0.1" value="1.0"
                     style="cursor: pointer;">
              <div class="d-flex justify-content-between" style="font-size: 0.75rem; color: rgba(255, 255, 255, 0.85); font-weight: 500;">
                <span>Focused (0)</span>
                <span>Balanced (1)</span>
                <span>Creative (2)</span>
              </div>
            </div>
            <div class="mb-3">
              <label class="form-label" style="color: var(--text-primary);">System Prompt</label>
              <textarea id="studios-new-agent-prompt" class="form-control" rows="4"
                        style="background: var(--bg-tertiary); border: 1px solid var(--border-color); color: var(--text-primary); font-size: 0.9em; resize: vertical;"
                        placeholder="You are a helpful assistant with access to various tools. When a user request can be fulfilled by using an available tool, use the tool instead of providing general information. Be concise and direct in your responses."></textarea>
            </div>
            <button type="submit" class="modern-btn modern-btn-primary">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" class="me-1">
                <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
              </svg>
              Create Agent
            </button>
          </form>
        </div>

        <!-- Add to Workspace Section -->
        <div class="mb-4">
          <h6 style="color: var(--text-primary);">Add Agents to Workspace</h6>
          <div class="modern-card p-3">
            <div class="mb-3">
              <label class="form-label" style="color: var(--text-primary);">Select Workspace</label>
              <select id="studios-workspace-select" class="modern-input w-100">
                <option value="">Loading workspaces...</option>
              </select>
            </div>
            <div class="alert alert-info mb-0" style="font-size: 0.875rem;">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="me-1" style="vertical-align: text-bottom;">
                <path d="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"/>
              </svg>
              Select a workspace above, then click "Add to Workspace" next to any agent below to add them to the selected workspace.
            </div>
          </div>
        </div>

        <!-- Existing Agents Section -->
        <div>
          <h6 style="color: var(--text-primary);">Existing Agents</h6>
          <div id="studios-agents-list-modal" class="modern-card p-3">
            <div class="text-center py-3">
              <div class="spinner-border text-primary" role="status"></div>
              <p class="mt-2" style="color: var(--text-muted);">Loading agents...</p>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="modern-btn modern-btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
{{end}}
