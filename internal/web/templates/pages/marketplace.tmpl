{{define "marketplace"}}
<!DOCTYPE html>
<html lang="en">
{{template "head.tmpl" .}}

<body>
    {{template "navbar.tmpl" .}}

    <div class="container-fluid">
        <div class="row">
            <main class="col-12 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <div class="d-flex align-items-center">
                        <a href="/" class="btn btn-primary me-3" title="Back to Chat">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"/>
                            </svg>
                            Back to Chat
                        </a>
                        <h1 class="h2 mb-0">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="me-2">
                                <path d="M18,13H20V17H22V19H16V13H18M18,5H22V11H18M8,13H14V19H8M8,1H14V11H8V1Z"/>
                            </svg>
                            Plugin Marketplace
                        </h1>
                    </div>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <button type="button" class="btn btn-sm btn-outline-secondary" id="refreshMarketplaceBtn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"/>
                            </svg>
                            Refresh
                        </button>
                    </div>
                </div>

                <!-- Search and Filter Bar -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="input-group">
                            <span class="input-group-text">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
                                </svg>
                            </span>
                            <input type="text" class="form-control" id="searchPlugins" placeholder="Search plugins...">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="btn-group" role="group">
                            <input type="radio" class="btn-check" name="filterOptions" id="filterAll" checked>
                            <label class="btn btn-outline-primary" for="filterAll">All</label>

                            <input type="radio" class="btn-check" name="filterOptions" id="filterInstalled">
                            <label class="btn btn-outline-primary" for="filterInstalled">Installed</label>

                            <input type="radio" class="btn-check" name="filterOptions" id="filterAvailable">
                            <label class="btn btn-outline-primary" for="filterAvailable">Available</label>

                            <input type="radio" class="btn-check" name="filterOptions" id="filterUpdates">
                            <label class="btn btn-outline-primary" for="filterUpdates">Updates</label>
                        </div>
                    </div>
                </div>

                <!-- Plugin Grid -->
                <div class="row" id="pluginGrid">
                    <div class="col-12 text-center py-5">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p class="mt-3 text-muted">Loading plugins...</p>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Plugin Details Modal -->
    <div class="modal fade" id="pluginDetailsModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="pluginDetailsTitle"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="pluginDetailsBody">
                    <!-- Plugin details will be loaded here -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="installPluginBtn" style="display: none;">Install</button>
                    <button type="button" class="btn btn-success" id="updatePluginBtn" style="display: none;">Update</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/modules/sidebar.js"></script>
    <script src="js/modules/marketplace.js"></script>
</body>
</html>
{{end}}
